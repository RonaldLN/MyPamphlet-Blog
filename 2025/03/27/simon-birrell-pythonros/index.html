<!doctype html><html class=no-js lang=zh><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=../../26/faster-whisper/ rel=prev><link href=../../28/mkdocs-material/ rel=next><link href=../../../../icons/favicon.png rel=icon><meta content="mkdocs-1.5.3, mkdocs-material-9.4.6" name=generator><title>Simon Birrell的 如何构建基于Python的ROS软件包 的中英文对照机翻 - My Pamphlet Blog</title><link href=../../../../assets/stylesheets/main.35e1ed30.min.css rel=stylesheet><link href=../../../../assets/stylesheets/palette.356b1318.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../../css/timeago.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel=stylesheet><link href=../../../../stylesheets/my_scheme.css rel=stylesheet><link href=../../../../stylesheets/custom.css rel=stylesheet><link href=../../../../stylesheets/card.css rel=stylesheet><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-H7SV12D750"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-H7SV12D750",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-H7SV12D750",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><script>var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7a9cfe470ed52fa0c0940a58fede385c";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();</script><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>html.glightbox-open{overflow:initial;height:100%}.gslide-title{user-select:text;margin-top:0}.gslide-desc{color:#666;user-select:text}.gslide-image img{background:#fff}.gscrollbar-fixer{padding-right:15px}.gdesc-inner{font-size:.75rem}body[data-md-color-scheme=slate] .gdesc-inner{background:var(--md-default-bg-color)}body[data-md-color-scheme=slate] .gslide-title,body[data-md-color-scheme=slate] .gslide-desc{color:var(--md-default-fg-color)}</style><script src=../../../../assets/javascripts/glightbox.min.js></script><body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=sunset-glow dir=ltr><script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#simon-birrell-pythonros> 跳转至 </a></div><div data-md-component=announce></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=页眉><a aria-label="My Pamphlet Blog" class="md-header__button md-logo" title="My Pamphlet Blog" data-md-component=logo href=../../../..> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> My Pamphlet Blog </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Simon Birrell的 如何构建基于Python的ROS软件包 的中英文对照机翻 </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to dark mode" data-md-color-media="(prefers-color-scheme: light)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=sunset-glow id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg></label><input aria-label="Switch to light mode" data-md-color-media="(prefers-color-scheme: dark)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=sunset-glow-dark id=__palette_2 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg></label></form><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=搜索 autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=搜索 required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg></label><nav aria-label=查找 class=md-search__options><a class="md-search__icon md-icon" aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=分享> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a><button class="md-search__icon md-icon" aria-label=清空当前内容 tabindex=-1 title=清空当前内容 type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>正在初始化搜索引擎</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a class=md-source data-md-component=source href=https://github.com/RonaldLN/MyPamphlet-Blog title=前往仓库> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg></div> <div class=md-source__repository>RonaldLN/MyPamphlet-Blog</div> </a></div></nav></header><div class=md-container data-md-component=container><nav aria-label=标签 class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=../../../..> Blog </a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0><label class=md-nav__title for=__drawer><a aria-label="My Pamphlet Blog" class="md-nav__button md-logo" title="My Pamphlet Blog" data-md-component=logo href=../../../..> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg> </a> My Pamphlet Blog</label><div class=md-nav__source><a class=md-source data-md-component=source href=https://github.com/RonaldLN/MyPamphlet-Blog title=前往仓库> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg></div> <div class=md-source__repository>RonaldLN/MyPamphlet-Blog</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_1 type=checkbox> <label class=md-nav__link for=__nav_1 id=__nav_1_label><span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_1_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_1><span class="md-nav__icon md-icon"></span> Blog</label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active"><a class=md-nav__link href=../../../..> <span class=md-ellipsis> Blog </span> </a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_1_2 type=checkbox> <label class=md-nav__link for=__nav_1_2 id=__nav_1_2_label tabindex=0><span class=md-ellipsis> 归档 </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=false aria-labelledby=__nav_1_2_label class=md-nav data-md-level=2><label class=md-nav__title for=__nav_1_2><span class="md-nav__icon md-icon"></span> 归档</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../../../../archive/2025/> <span class=md-ellipsis> 2025 </span> </a><li class=md-nav__item><a class=md-nav__link href=../../../../archive/2024/> <span class=md-ellipsis> 2024 </span> </a><li class=md-nav__item><a class=md-nav__link href=../../../../archive/2023/> <span class=md-ellipsis> 2023 </span> </a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_1_3 type=checkbox> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex=0><span class=md-ellipsis> 分类 </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=false aria-labelledby=__nav_1_3_label class=md-nav data-md-level=2><label class=md-nav__title for=__nav_1_3><span class="md-nav__icon md-icon"></span> 分类</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../../../../category/records-of-trivia/> <span class=md-ellipsis> Records of Trivia </span> </a><li class=md-nav__item><a class=md-nav__link href=../../../../category/configure-debug/> <span class=md-ellipsis> Configure & Debug </span> </a><li class=md-nav__item><a class=md-nav__link href=../../../../category/chronicle-of-events/> <span class=md-ellipsis> Chronicle of Events </span> </a></ul></nav></ul></nav></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label=目录><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> 目录</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#why-we-structure-the-source-files-in-a-python-based-ros-package-the-way-we-do-python-ros> Why we structure the source files in a Python-based ROS package the way we do我们为什么以这种方式在基于 Python 的 ROS 包中组织源文件 </a> <nav aria-label="Why we structure the source files in a Python-based ROS package the way we do我们为什么以这种方式在基于 Python 的 ROS 包中组织源文件" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#nodes-and-scripts> Nodes and Scripts节点和脚本 </a><li class=md-nav__item><a class=md-nav__link href=#bundling-our-code-into-a-python-package-python> Bundling our code into a Python package将我们的代码打包成 Python 包 </a><li class=md-nav__item><a class=md-nav__link href=#how-does-a-node-or-script-file-actually-import-our-main-code> How does a node or script file actually import our main code? 节点或脚本文件究竟是如何导入我们的主代码的？ </a><li class=md-nav__item><a class=md-nav__link href=#adding-sub-packages-to-our-main-python-package-python> Adding Sub-packages to our main Python Package添加子包到我们的主 Python 包 </a><li class=md-nav__item><a class=md-nav__link href=#a-working-example-you-can-download> A Working Example you can download一个你可以下载的工作示例 </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#defining-dependencies-for-our-python-based-ros-package-python-ros> Defining Dependencies for our Python-based ROS Package定义我们的基于 Python 的 ROS 包的依赖项 </a> <nav aria-label="Defining Dependencies for our Python-based ROS Package定义我们的基于 Python 的 ROS 包的依赖项" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#defining-standard-dependencies> Defining Standard Dependencies定义标准依赖项 </a><li class=md-nav__item><a class=md-nav__link href=#tip-testing-your-dependency-definitions> Tip: Testing your Dependency Definitions提示：测试您的依赖定义 </a></ul></nav></ul></nav></div></div></div><script defer src=https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/javascripts/toc.js></script><link href=https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/fold_toc.css rel=stylesheet><div class="md-content md-content--post" data-md-component=content><div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class="md-sidebar__inner md-post"><nav class="md-nav md-nav--primary"><div class=md-post__back><div class="md-nav__title md-nav__container"><a class=md-nav__link href=../../../..> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> <span class=md-ellipsis> 回到主页 </span> </a></div></div><div class="md-post__authors md-typeset"><div class="md-profile md-post__profile"><span class="md-author md-author--long"> <img alt="Ronald Luo" src="https://avatars.githubusercontent.com/u/120019179?v=4"> </span><span class=md-profile__description> <strong>Ronald Luo</strong><br> I'm A Student </span></div></div><ul class="md-post__meta md-nav__list"><li class="md-nav__item md-nav__item--section"><div class=md-post__title><span class=md-ellipsis> 元数据 </span></div> <nav class=md-nav><ul class=md-nav__list><li class=md-nav__item><div class=md-nav__link><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg><time datetime="2025-03-27 00:00:00" class=md-ellipsis>2025年3月27日星期四</time></div><li class=md-nav__item><div class=md-nav__link><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg><span class=md-ellipsis> 分类于 <a href=../../../../category/records-of-trivia/>Records of Trivia</a></span></div><li class=md-nav__item><div class=md-nav__link><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg><span class=md-ellipsis> 需要 14 分钟阅读时间 </span></div></ul></nav></ul></nav></div></div></div><article class="md-content__inner md-typeset"><h1 id=simon-birrell-pythonros>Simon Birrell的 <em>如何构建基于Python的ROS软件包</em> 的中英文对照机翻<a title="Permanent link" class=headerlink href=#simon-birrell-pythonros>¶</a></h1><div style=opacity:.7;margin-top:-15px;font-size:.75em><p><span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> 约 6024 个字 • <span class=twemoji><svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 90 行代码</div><p>在询问ChatGPT如何组织一个python的ros包的过程中，它的回复中提到了一篇Simon Birrell写的文章 <a href=https://www.artificialhumancompanions.com/structure-python-based-ros-package/>How to structure a Python-based ROS package</a>，去拜读了一下感觉受益匪浅。<p>由于文章篇幅略微有点长，每次打开加载翻译都要挺久，所以将原文和机翻搬运过来，方便自己之后的查阅。<div class="admonition quote"><p class=admonition-title>Quote<p><h1>How to structure a Python-based ROS package<br>如何构建基于 Python 的 ROS 软件包</h1><p>My apologies for the long wait since the last post. I started a PhD in AI and Robotics at Cambridge University, which has been absorbing all my spare time. This post is actually quite old, but I never got around to publishing it. The good news is that I’ve learned a ton about robotics, biomimetics, ROS, MoveIt, deep learning, the Jetson TX1 and more, all of which I hope to share in due course. My apologies also for comments that waited months to be approved. When I finally dragged myself back to comments section I found only 4 real comments out of more than 600 bits of spam.<p>对于上次发布后长时间的等待，我深表歉意。我在剑桥大学开始了人工智能和机器人学博士研究，这占用了我所有的业余时间。这篇帖子实际上已经很久了，但我一直没有找到时间发布它。好消息是，我在机器人学、仿生学、ROS、MoveIt、深度学习、Jetson TX1 等方面学到了很多，我希望能适时分享。对于等待了数月的评论，我也表示歉意。当我终于回到评论部分时，我发现 600 多条垃圾信息中只有 4 条是真正的评论。<p>This rather specific post grew out of a frustrating attempt to write a fairly complex ROS package in Python which was continually stymied by seemingly random import errors when my node was launched in different ways. In fairness, I am neither an experienced Python programmer nor a ROS expert, so my problems were due to ignorance. However, clearing up that ignorance was non-trivial and led me down one rabbit hole in terms of how Python manages packages and another rabbit hole in terms of how ROS does it.<p>这篇相当具体的帖子源于一次令人沮丧的尝试，即编写一个相当复杂的 Python ROS 包，在以不同方式启动节点时，我的节点总是因为看似随机的导入错误而受阻。公平地说，我既不是经验丰富的 Python 程序员，也不是 ROS 专家，所以我的问题源于无知。然而，消除这种无知并非易事，它让我陷入了一个关于 Python 如何管理包的兔子洞，另一个关于 ROS 如何做的兔子洞。<p>This post is intended to be a shortcut for novice ROS developers who want to develop a Python node that involves more than one source file and imports Python libraries.<p>本文旨在为希望开发涉及多个源文件和导入 Python 库的 Python 节点的 ROS 新手开发者提供捷径。<p>My earlier ignorance (at least on this subject) can be summarised as:<p>我早期的无知（至少在这个问题上）可以总结为：<ol><li><p>I didn’t really understand how Python’s import statement worked</p> <p>我并没有真正理解 Python 的导入语句是如何工作的。</p><li><p>I didn’t know how to structure the source files in a Python-based ROS package</p> <p>我不知道如何组织基于 Python 的 ROS 包的源文件</p><li><p>I didn’t really know what the purpose of Catkin was for Python-based ROS packages</p> <p>我并不真正了解 Catkin 对基于 Python 的 ROS 包的作用</p><li><p>I didn’t know what boilerplate needed to be applied so that Catkin could deal with my ROS package</p> <p>我不知道需要应用哪些模板代码，以便 Catkin 能够处理我的 ROS 包</p><li><p>I didn’t know how to declare dependencies in my ROS package</p> <p>我不知道如何在 ROS 包中声明依赖项</p></ol><h2 id=why-we-structure-the-source-files-in-a-python-based-ros-package-the-way-we-do-python-ros>Why we structure the source files in a Python-based ROS package the way we do<br>我们为什么以这种方式在基于 Python 的 ROS 包中组织源文件<a title="Permanent link" class=headerlink href=#why-we-structure-the-source-files-in-a-python-based-ros-package-the-way-we-do-python-ros>¶</a></h2><p>Python-based ROS packages will generally contain nodes, scripts and launch files.<p>基于 Python 的 ROS 包通常包含节点、脚本和启动文件。<p>Launch files are a set of instructions to launch one or more ROS nodes as well as the ROS master if it isn’t already running.<p>启动文件是一组指令，用于启动一个或多个 ROS 节点，以及如果尚未运行，启动 ROS 主节点。<h3 id=nodes-and-scripts>Nodes and Scripts<br>节点和脚本<a title="Permanent link" class=headerlink href=#nodes-and-scripts>¶</a></h3><p>The difference between nodes and scripts is largely semantic: they are both Python files that can be executed from the command line with<p>节点与脚本的差异主要在于语义：它们都是可以用于命令行执行的 Python 文件<p>rosrun &lt;package name> &lt;node or script name><p>rosrun &lt;包名> &lt;节点或脚本名><p>Nodes are assumed to create and launch ROS Nodes, whereas scripts can be used for any purpose. This distinction is a convention to make our packages easier to understand, not a technical difference.<p>节点通常用于创建和启动 ROS 节点，而脚本可用于任何目的。这种区别是一种约定，旨在使我们的包更容易理解，并非技术上的差异。<p>For convenience we put nodes and scripts into folders called &lt;base dir>/nodes and &lt;base dir>/scripts respectively, although this isn’t strictly necessary. They should be given execute permissions with chmod<p>为了方便，我们将节点和脚本分别放入名为 &lt;基础目录>/nodes 和 &lt;基础目录>/scripts 的文件夹中，尽管这并非绝对必要。它们应该被赋予执行权限，使用 chmod 命令<div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=nb>cd</span><span class=w> </span>&lt;base<span class=w> </span>dir>
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>chmod<span class=w> </span>+x<span class=w> </span>nodes/mynode1
</span><span id=__span-0-3><a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>chmod<span class=w> </span>+x<span class=w> </span>scripts/myscript1
</span></code></pre></div><p>For aesthetics, mynode1 and myscript1 won’t have a .py extension (which means the first line of the file must be labelled with #!/usr/bin/env python). The user can then use<p>为了美观，mynode1 和 myscript1 不会使用.py 扩展名（这意味着文件的第一行必须标记为 #!/usr/bin/env python）。然后用户就可以使用<div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>rosrun<span class=w> </span>mypackage<span class=w> </span>mynode1
</span></code></pre></div><p>and not the messier<p>而不是更混乱的<div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a>rosrun<span class=w> </span>mypackage<span class=w> </span>mynode1.py
</span></code></pre></div><p>You can put your entire code in either of these files and move on. That’s enough to get to hello world:<p>您可以将所有代码放入这两个文件中的任何一个，然后继续。这样就足够实现 hello world 了：<div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=ch>#!/usr/bin/env python</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=k>if</span> <span class=vm>__name__</span><span class=o>==</span> <span class=s1>'__main__'</span><span class=p>:</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a>    <span class=nb>print</span> <span class=s2>"hello world"</span>
</span></code></pre></div><p>However, it is more likely that you want to break down any non-trivial Python code into various separate files (known as “modules” in Python land). The best way to do this is to keep your nodes and scripts as short as possible and have them simply import and execute the main() function from your real code. For example, mynode1 might contain:<p>然而，你更有可能想要将任何非平凡 Python 代码分解成多个单独的文件（在 Python 领域被称为“模块”）。最好的做法是尽可能保持你的节点和脚本简短，并简单地从你的实际代码中导入并执行 main() 函数。例如，mynode1 可能包含：<div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=ch>#!/usr/bin/env python</span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=kn>from</span><span class=w> </span><span class=nn>mypackage</span><span class=w> </span><span class=kn>import</span> <span class=n>main</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=k>if</span> <span class=vm>__name__</span><span class=o>==</span> <span class=s1>'__main__'</span><span class=p>:</span>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a>    <span class=n>main</span><span class=p>()</span>
</span></code></pre></div><p>Why bother with this extra layer of files if the real work is being done elsewhere? The ROS command rosrun hooks into nodes and scripts, as does roslaunch. But we may also want to import our ROS package functionality into a second ROS package. This is done by declaring Catkin dependencies in the second ROS package (for building purposes) and then using standard Python mechanisms for importing the code from the first package into the second one. The “Python mechanisms” bit is important, as it means we should structure our importable code as a Python package, not to be confused with a ROS package!<p>为什么要在实际工作在其他地方的情况下，还麻烦地添加这一层文件？ROS 命令 rosrun 会连接到节点和脚本，roslaunch 也是如此。但我们可能还想将我们的 ROS 包功能导入第二个 ROS 包。这是通过在第二个 ROS 包中声明 Catkin 依赖（用于构建目的）来完成的，然后使用标准的 Python 机制将第一个包中的代码导入第二个包中。这里的“Python 机制”部分很重要，因为它意味着我们应该将可导入的代码结构化为一个 Python 包，而不是混淆于 ROS 包！<p>Now let’s turn to where we put the bulk of our code.<p>现在让我们转向放置我们大部分代码的地方。<h3 id=bundling-our-code-into-a-python-package-python>Bundling our code into a Python package<br>将我们的代码打包成 Python 包<a title="Permanent link" class=headerlink href=#bundling-our-code-into-a-python-package-python>¶</a></h3><p>So our ROS package needs to contain a Python package with the bulk of our code, at least if we want to make it importable into other ROS packages. The conventional way to do that is to put the code into a directory called<p>因此，我们的 ROS 软件包需要包含一个 Python 软件包，其中包含我们大部分的代码，至少如果我们想将其导入到其他 ROS 软件包中。传统的方法是将代码放入一个目录中，目录名为<div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>src/&lt;Python<span class=w> </span>package<span class=w> </span>name>
</span></code></pre></div><p>By convention, the Python package name and the ROS Package name are the same, even if strictly speaking they don’t need to be. So if our ROS Package is called mypackage, then put the bulk of your Python code in<p>按照惯例，Python 包名和 ROS 包名相同，即使严格来说它们不需要相同。所以如果我们的 ROS 包名为 mypackage，那么将大部分 Python 代码放在<div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>src/mypackage
</span></code></pre></div><p>The import statement in our nodes and scripts will look like this:<p>我们的节点和脚本中的导入语句将如下所示：<div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class=kn>from</span><span class=w> </span><span class=nn>mypackage</span><span class=w> </span><span class=kn>import</span> <span class=n>main</span>
</span></code></pre></div><p>When Python comes across an import statement of this sort, it assumes that <strong>mypackage</strong> refers to either a single file called <strong>mypackage.py</strong> (a “module” in Python land) or a directory containing an <strong>__init__.py</strong> file and optionally other Python files (collectively known as a “Python package”). We’re going to be using the latter.<p>当 Python 遇到这种导入语句时，它假定 <strong>mypackage</strong> 指的是一个名为 <strong>mypackage.py</strong> 的单个文件（在 Python 领域中称为“模块”）或一个包含 <strong>__init__.py</strong> 文件和可选的其他 Python 文件（统称为“Python 包”）的目录。我们将使用后者。<p>So at a minimum, we need a file called<p>所以至少我们需要一个文件名为<div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>src/mypackage/__init__.py
</span></code></pre></div><p>This can contain all our code if we want, including the main() function called from our nodes and scripts. More likely, we’ll want to split our code into different files with descriptive names. So let’s put main() into <strong>src/mypackage/foo.py</strong> and have <strong>__init__.py</strong> contain the following:<p>这可以包含我们所有的代码，包括从我们的节点和脚本中调用的 main()函数。更有可能的是，我们希望将我们的代码拆分到不同的文件中，并使用描述性的名称。因此，我们将 main() 放入 <strong>src/mypackage/foo.py</strong> 中，让 <strong>__init__.py</strong> 包含以下内容：<div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a><span class=kn>from</span><span class=w> </span><span class=nn>foo</span><span class=w> </span><span class=kn>import</span> <span class=n>main</span>
</span></code></pre></div><p>This will then be executed whenever a node or script file says<p>这将在节点或脚本文件声明时执行<div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a><span class=kn>from</span><span class=w> </span><span class=nn>mypackage</span><span class=w> </span><span class=kn>import</span> <span class=n>main</span>
</span></code></pre></div><p>So main() from foo.py gets imported into the __init__.py file within mypackage, where it can be re-imported into the node and script files. foo.py itself can look something like this:<p>因此，foo.py 中的 main() 被导入到 mypackage 的 __init__.py 文件中，以便可以在节点和脚本文件中重新导入。foo.py 本身可能看起来像这样：<div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a><span class=ch>#!/usr/bin/env python</span>
</span><span id=__span-11-2><a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>
</span><span id=__span-11-3><a href=#__codelineno-11-3 id=__codelineno-11-3 name=__codelineno-11-3></a><span class=c1># ... The bulk of our code can go here ...</span>
</span><span id=__span-11-4><a href=#__codelineno-11-4 id=__codelineno-11-4 name=__codelineno-11-4></a>
</span><span id=__span-11-5><a href=#__codelineno-11-5 id=__codelineno-11-5 name=__codelineno-11-5></a><span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-11-6><a href=#__codelineno-11-6 id=__codelineno-11-6 name=__codelineno-11-6></a>    <span class=nb>print</span> <span class=s2>"Now executing main() in foo.py"</span>
</span><span id=__span-11-7><a href=#__codelineno-11-7 id=__codelineno-11-7 name=__codelineno-11-7></a>    <span class=c1># Call the bulk of our code...</span>
</span></code></pre></div><p>All done, right? Not quite. We still haven’t told the node and script files where to find the Python package mypackage. Remember that Python will look in the current directory for a module or Python package to import, or on PYTHONPATH. But the directory mypackage is &lt;base dir>/src which is not immediately accessible. Prepare to enter a rabbit hole.<p>所有都完成了，对吧？并不完全。我们还没有告诉节点和脚本文件在哪里可以找到 Python 包 mypackage。记住，Python 会在当前目录中查找要导入的模块或 Python 包，或者在 PYTHONPATH 上。但 mypackage 目录是 &lt;基础目录>/src，这不是立即可访问的。准备进入一个兔子洞。<h3 id=how-does-a-node-or-script-file-actually-import-our-main-code>How does a node or script file actually import our main code? <br>节点或脚本文件究竟是如何导入我们的主代码的？<a title="Permanent link" class=headerlink href=#how-does-a-node-or-script-file-actually-import-our-main-code>¶</a></h3><p>Python looks for modules or Python packages in the current directory or on the path specified by the environment variable PYTHONPATH. We shouldn’t manipulate PYTHONPATH ourselves, but get Catkin to do it for us. To do that, we need to configure a file called <strong>setup.py</strong> in &lt;base dir>.<p>Python 会在当前目录或由环境变量 PYTHONPATH 指定的路径中查找模块或 Python 包。我们不应该自己操作 PYTHONPATH，而应该让 Catkin 来为我们操作。为此，我们需要在 &lt;基础目录> 中配置一个名为 <strong>setup.py</strong> 的文件。<p><strong>setup.py</strong> is a standard Python file used for creating a distributable, installable chunks of code (I refuse to use the word “package” with yet another meaning). This process is handled by a Python tool suite called <strong>distutils</strong> which is documented here, for those that are interested. For our purposes, we simply need to use <strong>setup.py</strong> to tell Catkin the name of our Python package (“mypackage”) and where it is located (in the directory “src”). Here is an example of setup.py:<p><strong>setup.py</strong> 是一个标准的 Python 文件，用于创建可分发、可安装的代码块（我拒绝再用“包”这个词表示另一个意思）。这个过程由一个名为 <strong>distutils</strong> 的 Python 工具套件处理，有关文档在此处，有兴趣的可以查阅。对我们来说，我们只需要使用 <strong>setup.py</strong> 来告诉 Catkin 我们 Python 包的名称（“mypackage”）以及它的位置（在“src”目录中）。以下是一个 setup.py 的示例：<div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a><span class=ch>#!/usr/bin/env python</span>
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a><span class=kn>from</span><span class=w> </span><span class=nn>distutils.core</span><span class=w> </span><span class=kn>import</span> <span class=n>setup</span>
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a><span class=kn>from</span><span class=w> </span><span class=nn>catkin_pkg.python_setup</span><span class=w> </span><span class=kn>import</span> <span class=n>generate_distutils_setup</span>
</span><span id=__span-12-5><a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a>
</span><span id=__span-12-6><a href=#__codelineno-12-6 id=__codelineno-12-6 name=__codelineno-12-6></a><span class=n>setup_args</span> <span class=o>=</span> <span class=n>generate_distutils_setup</span><span class=p>(</span>
</span><span id=__span-12-7><a href=#__codelineno-12-7 id=__codelineno-12-7 name=__codelineno-12-7></a>    <span class=n>packages</span><span class=o>=</span><span class=p>[</span><span class=s1>'mypackage'</span><span class=p>],</span>
</span><span id=__span-12-8><a href=#__codelineno-12-8 id=__codelineno-12-8 name=__codelineno-12-8></a>    <span class=n>package_dir</span><span class=o>=</span><span class=p>{</span><span class=s1>''</span><span class=p>:</span> <span class=s1>'src'</span><span class=p>}</span>
</span><span id=__span-12-9><a href=#__codelineno-12-9 id=__codelineno-12-9 name=__codelineno-12-9></a><span class=p>)</span>
</span><span id=__span-12-10><a href=#__codelineno-12-10 id=__codelineno-12-10 name=__codelineno-12-10></a>
</span><span id=__span-12-11><a href=#__codelineno-12-11 id=__codelineno-12-11 name=__codelineno-12-11></a><span class=n>setup</span><span class=p>(</span><span class=o>**</span><span class=n>setup_args</span><span class=p>)</span>
</span></code></pre></div><p>All you need to do is customise the line packages=… The rest is boilerplate. For those interested in what the boilerplate does: it gets called by Catkin during the catkin_make process, examines package.xml for meta-data like author, license etc, adds the defined packages and package_dir and passes the combined set of information to <strong>distutils</strong> which does the actual installation into the Catkin development workspace.<p>只需自定义 packages=… 这一行。其余的都是模板代码。对于那些对模板代码的作用感兴趣的人：它在 catkin_make 过程中被 Catkin 调用，检查 package.xml 中的元数据，如作者、许可证等，添加定义的包和 package_dir，然后将合并后的信息传递给 <strong>distutils</strong>，distutils 在 Catkin 开发工作区中执行实际安装。<p>To make all this work, there are two more tweaks to do in Catkin’s CMakeLists.txt file.<p>为了使所有这些工作正常进行，需要在 Catkin 的 CMakeLists.txt 文件中进行两项调整。<p>First, make sure this line is uncommented:<p>首先，确保这一行取消注释：<div class="language-cmake highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a><span class=nb>catkin_python_setup</span><span class=p>()</span>
</span></code></pre></div><p>This tells Catkin to pay attention during the catkin_make process to the <strong>setup.py</strong> file we just configured.<p>这告诉 Catkin 在 catkin_make 过程中注意我们刚刚配置的 <strong>setup.py</strong> 文件。<p>Second, in the install() function we need to list the node and script files we defined right at the beginning. So:<p>其次，在 install() 函数中，我们需要列出我们在一开始定义的节点和脚本文件。所以：<div class="language-cmake highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a><span class=nb>install</span><span class=p>(</span><span class=s>PROGRAMS</span>
</span><span id=__span-14-2><a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a><span class=w>    </span><span class=s>scripts/myscript1</span>
</span><span id=__span-14-3><a href=#__codelineno-14-3 id=__codelineno-14-3 name=__codelineno-14-3></a><span class=w>    </span><span class=s>nodes/mynode1</span>
</span><span id=__span-14-4><a href=#__codelineno-14-4 id=__codelineno-14-4 name=__codelineno-14-4></a><span class=w>    </span><span class=s>nodes/mynode2</span>
</span><span id=__span-14-5><a href=#__codelineno-14-5 id=__codelineno-14-5 name=__codelineno-14-5></a><span class=w>    </span><span class=s>DESTINATION</span><span class=w> </span><span class=o>${</span><span class=nv>CATKIN_PACKAGE_BIN_DESTINATION</span><span class=o>}</span>
</span><span id=__span-14-6><a href=#__codelineno-14-6 id=__codelineno-14-6 name=__codelineno-14-6></a><span class=p>)</span>
</span></code></pre></div><p>This tells Catkin to install our executable files into an accessible location in the Catkin development workspace.<p>这告诉 Catkin 将我们的可执行文件安装到 Catkin 开发工作区的一个可访问位置。<p>Once setup.py and CMakeLists.txt are configured, execute catkin_make:<p>一旦配置好 setup.py 和 CMakeLists.txt，执行 catkin_make：<p>cd ~/catkin_ws<p>catkin_make<p>and you should be able to execute your nodes and scripts, and therefore your code in src/mypackage/foo.py from rosrun:<p>您应该能够执行您的节点和脚本，因此可以从 rosrun 中执行 src/mypackage/foo.py 中的代码：<p>rosrun mypackage mynode1<p>You can pretty much stop here. Add Python files (“modules”) like bar.py, baz.py to src/mypackage and have them import functions into each other with<p>您基本上可以在这里停止。将 Python 文件（“模块”）如 bar.py、baz.py 添加到 src/mypackage 中，并让它们相互导入函数通过<div class="language-python highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a><span class=kn>from</span><span class=w> </span><span class=nn>bar</span><span class=w> </span><span class=kn>import</span> <span class=n>fn1</span><span class=p>,</span> <span class=n>fn2</span>
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a><span class=kn>from</span><span class=w> </span><span class=nn>baz</span><span class=w> </span><span class=kn>import</span> <span class=n>fn3</span><span class=p>,</span> <span class=n>fn4</span>
</span></code></pre></div><p>For Python code of medium complexity that’s probably enough to add some decent structure to your code. Gluttons for punishment may want to further divide the code into sub-packages. Let’s have a look at how to do that.<p>对于中等复杂度的 Python 代码，这可能足以给你的代码添加一些合理的结构。喜欢受苦的人可能还想进一步将代码划分为子包。让我们看看如何做到这一点。<h3 id=adding-sub-packages-to-our-main-python-package-python>Adding Sub-packages to our main Python Package<br>添加子包到我们的主 Python 包<a title="Permanent link" class=headerlink href=#adding-sub-packages-to-our-main-python-package-python>¶</a></h3><p>You can add further Python packages underneath our main Python package in src/mypackage. Each subdirectory takes the name of the sub-package and must include an __init__.py file and optionally, some other Python files.<p>您可以在 src/mypackage 下的主 Python 包中添加更多的 Python 包。每个子目录以子包的名称命名，必须包含一个 __init__.py 文件，并可选地包含一些其他 Python 文件。<div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>src/mypackage/subpackage/__init__.py
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a>src/mypackage/subpackage/something.py
</span></code></pre></div><p>As usual, we could shoehorn all our code into __init__.py, but we’ll likely want to have it into separate files like something.py.<p>通常，我们可以把所有代码塞进 __init__.py 中，但可能更希望将其放入单独的文件，比如 something.py。<p>So our sub-package <strong>__init__.py</strong> might contain:<p>所以我们的子包 <strong>__init__.py</strong> 可能包含：<div class="language-python highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a><span class=kn>from</span><span class=w> </span><span class=nn>something</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span></code></pre></div><p>In our main Python package we then import code using the standard Python mechanisms:<p>在我们的主 Python 包中，我们随后使用标准的 Python 机制导入代码：<div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a><span class=kn>from</span><span class=w> </span><span class=nn>subpackage</span><span class=w> </span><span class=kn>import</span> <span class=n>fn5</span><span class=p>,</span> <span class=n>fn6</span>
</span></code></pre></div><p>If also we want to make these Python sub-packages available to import into other ROS packages, we would need to add them to packages=… in setup.py. If they’re purely used internally by our code, then there’s no need.<p>如果我们也想将这些 Python 子包提供给其他 ROS 包导入，就需要在 setup.py 中的 packages=… 处添加它们。如果它们仅由我们的代码内部使用，则无需添加。<h3 id=a-working-example-you-can-download>A Working Example you can download<br>一个你可以下载的工作示例<a title="Permanent link" class=headerlink href=#a-working-example-you-can-download>¶</a></h3><p>Here’s a an example I threw together as an illustration, with one node, one script, one launch file, the main Python package and one sub-package.<p>这里是一个我为了说明而拼凑的例子，包含一个节点、一个脚本、一个启动文件、主 Python 包和一个子包。<p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=auto href=../../../../images/python_ros_pkg_1.png><img alt=python_ros_pkg_1 loading=lazy src=../../../../images/python_ros_pkg_1.png></a><p>You can see the code here <a href=https://github.com/SimonBirrell/simontest>https://github.com/SimonBirrell/simontest</a><p>您可以在这里查看代码 <a href=https://github.com/SimonBirrell/simontest>https://github.com/SimonBirrell/simontest</a><div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>rosrun<span class=w> </span>simontest<span class=w> </span>simon_node1
</span></code></pre></div><p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=auto href=../../../../images/python_ros_pkg_2.png><img alt=python_ros_pkg_2 loading=lazy src=../../../../images/python_ros_pkg_2.png></a><p>Check out the code, paying attention to setup.py and the various __init__.py files. Figuring out what is being called when and how should give you a solid grounding for building robust and complex Python applications.<p>查看代码，注意 setup.py 和各种 __init__.py 文件。弄清楚何时以及如何调用某些内容，这将为构建稳健且复杂的 Python 应用程序提供坚实的基础。<p>If you want to download, build it and run the commands yourself:<p>如果您想下载、构建并自行运行命令：<div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a><span class=nb>cd</span><span class=w> </span>~/catkin_ws/src
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/SimonBirrell/simontest
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a><span class=nb>cd</span><span class=w> </span>..
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a>catkin_make
</span></code></pre></div><h2 id=defining-dependencies-for-our-python-based-ros-package-python-ros>Defining Dependencies for our Python-based ROS Package<br>定义我们的基于 Python 的 ROS 包的依赖项<a title="Permanent link" class=headerlink href=#defining-dependencies-for-our-python-based-ros-package-python-ros>¶</a></h2><p>All the above is sufficient for ROS Packages that don’t call external Python libraries. Generally though, you will be importing and using other Python libraries such as numpy. We can simply install these packages on our development machine using pip, apt-get or some other method and then import them as usual, with<p>所有上述内容对于不调用外部 Python 库的 ROS 包来说已经足够了。不过，通常情况下，你将导入并使用其他 Python 库，如 numpy。我们可以在我们的开发机器上简单地使用 pip、apt-get 或其他方法安装这些包，然后像通常一样导入它们，通过<div class="language-python highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span>
</span></code></pre></div><p>The only problem with this approach is when you come to distribute your ROS Package to other users to install their machines. You will have to include instructions to ask them to install the same required Python libraries before they run your ROS Package. It is easy to forget what you have installed on your own development machine, so a better solution is to explicitly define the dependencies, so that Catkin will install them if required when users build your ROS Package.<p>这种方法唯一的问题是，当你将你的 ROS 包分发给其他用户安装到他们的机器上时，你必须包括指示他们安装相同的必需 Python 库的说明。很容易忘记你在自己的开发机器上安装了什么，所以更好的解决方案是明确定义依赖项，这样当用户构建你的 ROS 包时，Catkin 会根据需要安装它们。<p>As far as I can tell, this needs to be done twice, as once would be too easy.<p>据我所知，这需要做两次，因为一次太容易了。<h3 id=defining-standard-dependencies>Defining Standard Dependencies<br>定义标准依赖项<a title="Permanent link" class=headerlink href=#defining-standard-dependencies>¶</a></h3><p>First, you need to define the dependencies the Python level, by informing distutils of the Python packages you require. This is done through setup.py in the &lt;base dir>:<p>首先，您需要定义 Python 级别的依赖项，通过通知 distutils 您所需的 Python 包。这通过 &lt;基础目录> 中的 setup.py 来完成：<div class="language-python highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a><span class=ch>#!/usr/bin/env python</span>
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a>
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a><span class=kn>from</span><span class=w> </span><span class=nn>distutils.core</span><span class=w> </span><span class=kn>import</span> <span class=n>setup</span>
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a><span class=kn>from</span><span class=w> </span><span class=nn>catkin_pkg.python_setup</span><span class=w> </span><span class=kn>import</span> <span class=n>generate_distutils_setup</span>
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a>
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a><span class=n>setup_args</span> <span class=o>=</span> <span class=n>generate_distutils_setup</span><span class=p>(</span>
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a>    <span class=n>packages</span><span class=o>=</span><span class=p>[</span><span class=s1>'my package'</span><span class=p>],</span>
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a>    <span class=n>package_dir</span><span class=o>=</span><span class=p>{</span><span class=s1>''</span><span class=p>:</span> <span class=s1>'src'</span><span class=p>},</span>
</span><span id=__span-22-9><a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a>    <span class=n>install_requires</span><span class=o>=</span><span class=p>[</span><span class=s1>'required_python_package1'</span><span class=p>,</span> <span class=s1>'required_python_package2'</span><span class=p>]</span>
</span><span id=__span-22-10><a href=#__codelineno-22-10 id=__codelineno-22-10 name=__codelineno-22-10></a><span class=p>)</span>
</span></code></pre></div><p>The dependencies are listed in the line beginning install_requires=… The names used are the <em>Python</em> names, i.e. the names you would use if you were installing manually with pip.<p>依赖项列在以 install_requires=… 开头的行中，使用的名称是 <em>Python</em> 名称，即如果您手动使用 pip 安装时使用的名称。<div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a>sudo<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>required_python_package1
</span></code></pre></div><p>The second place you need to define the dependencies is in package.xml. Why on earth do we need to define them twice?<p>第二个需要定义依赖的地方是在 package.xml 文件中。究竟为什么我们需要定义它们两次呢？<p>The reason is that Catkin has its own set of names for Python packages that is separate from the Python names. Python dependencies are defined in package.xml with a tag like this:<p>原因是 Catkin 有一套独立的 Python 包名称，与 Python 名称不同。Python 依赖关系在 package.xml 中以如下标签定义：<p>&lt;exec_depend>ros-python-dependency&lt;/exec_depend><p>where the name ros-python-dependency comes from the <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a>. As an example, on a recent project I used the Python web sockets library <a href=http://ws4py.readthedocs.io/en/latest/>ws4py</a>, which is installed manually like this:<p>该名称 ros-python-dependency 来源于 <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a>。例如，在最近的一个项目中，我使用了 Python 网络套接字库 <a href=http://ws4py.readthedocs.io/en/latest/>ws4py</a>，它被手动安装如下：<div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>sudo<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>ws4py
</span></code></pre></div><p>Searching for ws4py on the <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a> we find:<p>在 <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a> 中搜索 ws4py 时，我们发现：<div class="language-yaml highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a><span class=nt>python-ws4py-pip</span><span class=p>:</span>
</span><span id=__span-25-2><a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a><span class=w>  </span><span class=nt>ubuntu</span><span class=p>:</span>
</span><span id=__span-25-3><a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a><span class=w>    </span><span class=nt>pip</span><span class=p>:</span>
</span><span id=__span-25-4><a href=#__codelineno-25-4 id=__codelineno-25-4 name=__codelineno-25-4></a><span class=w>      </span><span class=nt>packages</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>ws4py</span><span class="p p-Indicator">]</span>
</span></code></pre></div><p>The final line references the install target for pip. So we can use the first line for our dependency name in package.xml:<p>最后一行引用了 pip 的安装目标。因此，我们可以将第一行用作 package.xml 中依赖项的名称：<div class="language-xml highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a><span class=nt>&lt;run_depend></span>python-ws4py-pip<span class=nt>&lt;/run_depend></span>
</span></code></pre></div><p>Once this is added, your ROS Package should be installable by Catkin on other peoples’ machines and the dependencies should be automatically installed and built as required.<p>一旦添加，您的 ROS 包应该可以通过 Catkin 在其他人的机器上安装，并且所需的依赖项将自动安装和构建。<p>The <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a> includes most commonly-used Python packages. Occasionally though, you will have some unusual Python dependency.<p><a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a> 包括大多数常用的 Python 包。偶尔，你可能会遇到一些不寻常的 Python 依赖项。<p>I should say at this point that the simplest solution is just to ask your users to manually install the non-standard Python dependency, with <strong>pip</strong> or some other installer. If you want full automation though, you’re going to have to fork the <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a>, add the non-standard package and submit a pull request. Assuming your request is accepted, the next people to access the <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a> will be able to automatically install the dependency.<p>我应该在这里说，最简单的解决方案就是要求用户手动使用 <strong>pip</strong> 或其他安装程序安装非标准的 Python 依赖项。不过，如果您想要完全自动化，您将不得不分支 <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a>，添加非标准的包并提交一个 pull 请求。假设您的请求被接受，接下来访问 <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a>的人将能够自动安装依赖项。<p>There are <a href=http://docs.ros.org/independent/api/rosdep/html/contributing_rules.html>perfectly adequate instructions for doing this here</a>.<p>这里提供了<a href=http://docs.ros.org/independent/api/rosdep/html/contributing_rules.html>做这件事的完全充分的说明</a>。<h3 id=tip-testing-your-dependency-definitions>Tip: Testing your Dependency Definitions<br>提示：测试您的依赖定义<a title="Permanent link" class=headerlink href=#tip-testing-your-dependency-definitions>¶</a></h3><p>It’s typically tough to test whether the various changes above work. As soon as you test once, your machine has changed state; the packages are now installed. Ideally, each test would start off with a pristine ROS installation, then install your ROS Package, run catkin_make and then test the code itself.<p>通常很难测试上述各种更改是否有效。一旦测试一次，你的机器状态就会改变；包已经安装。理想情况下，每个测试都应该从一个全新的 ROS 安装开始，然后安装你的 ROS 包，运行 catkin_make，然后测试代码本身。<p>This is now quite easy to do using one of the continuous integration services like <a href=https://travis-ci.org/>TravisCI</a> or <a href=https://circleci.com/>CircleCI</a>. I use the latter; sign up is quick and usage is free for the sort of workloads you’ll likely be doing.<p>现在使用像 <a href=https://travis-ci.org/>TravisCI</a> 或 <a href=https://circleci.com/>CircleCI</a> 这样的持续集成服务来做这件事相当简单。我使用后者；注册快速，而且对于你可能会进行的工作负载来说，使用是免费的。<p>For example, I pointed CircleCI to my ROS Package’s GitHub repo and added the following circle.yaml file in &lt;base dir>:<p>例如，我将 ROS 包的 GitHub 仓库指向 CircleCI，并在 &lt;基础目录> 中添加了以下 circle.yaml 文件：<div class="language-yaml highlight"><pre><span></span><code><span id=__span-27-1><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a><span class=nt>dependencies</span><span class=p>:</span>
</span><span id=__span-27-2><a href=#__codelineno-27-2 id=__codelineno-27-2 name=__codelineno-27-2></a><span class=w>  </span><span class=nt>pre</span><span class=p>:</span>
</span><span id=__span-27-3><a href=#__codelineno-27-3 id=__codelineno-27-3 name=__codelineno-27-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'</span>
</span><span id=__span-27-4><a href=#__codelineno-27-4 id=__codelineno-27-4 name=__codelineno-27-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116</span>
</span><span id=__span-27-5><a href=#__codelineno-27-5 id=__codelineno-27-5 name=__codelineno-27-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sudo apt-get update</span>
</span><span id=__span-27-6><a href=#__codelineno-27-6 id=__codelineno-27-6 name=__codelineno-27-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sudo apt-get install ros-indigo-ros-base</span>
</span><span id=__span-27-7><a href=#__codelineno-27-7 id=__codelineno-27-7 name=__codelineno-27-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">sudo rosdep init</span>
</span><span id=__span-27-8><a href=#__codelineno-27-8 id=__codelineno-27-8 name=__codelineno-27-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rosdep update</span>
</span><span id=__span-27-9><a href=#__codelineno-27-9 id=__codelineno-27-9 name=__codelineno-27-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">echo "source /opt/ros/indigo/setup.bash" >> ~/.bashrc</span>
</span><span id=__span-27-10><a href=#__codelineno-27-10 id=__codelineno-27-10 name=__codelineno-27-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mkdir -p ~/catkin_ws/src && cd ~/catkin_ws/src && catkin_init_workspace</span>
</span><span id=__span-27-11><a href=#__codelineno-27-11 id=__codelineno-27-11 name=__codelineno-27-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pip install 'gevent==1.0.2'</span>
</span><span id=__span-27-12><a href=#__codelineno-27-12 id=__codelineno-27-12 name=__codelineno-27-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cd ~/catkin_ws/ && catkin_make</span>
</span></code></pre></div><p>This YAML file tells CircleCI to run a set of instructions before executing the automated tests. These instructions are essentially the standard ROS installation instructions until the line<p>这个 YAML 文件告诉 CircleCI 在执行自动化测试之前运行一系列指令。这些指令本质上与标准 ROS 安装指令相同，直到该行<div class="language-yaml highlight"><pre><span></span><code><span id=__span-28-1><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mkdir -p ~/catkin_ws/src && cd ~/catkin_ws/src && catkin_init_workspace</span>
</span></code></pre></div><p>This line creates the Catkin workspace. Again, this is standard ROS.<p>这一行创建 Catkin 工作空间。再次强调，这是标准的 ROS。<div class="language-yaml highlight"><pre><span></span><code><span id=__span-29-1><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pip install 'gevent==1.0.2'</span>
</span></code></pre></div><p>This installs gevent, which you’ll recall was a package that wasn’t available in the <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro list</a>.<p>此操作安装了 gevent，您可能还记得，这是一个在 <a href=https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml>rosdistro 列表</a> 中不可用的包。<div class="language-yaml highlight"><pre><span></span><code><span id=__span-30-1><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cd ~/catkin_ws/ && catkin_make</span>
</span></code></pre></div><p>This line runs catkin_make, which will build your ROS package.<p>这一行运行 catkin_make，这将构建您的 ROS 软件包。<p>Of course, you will ideally now have some tests (perhaps with nose) that run through your code and do the various imports. CircleCI should be configured to run these tests.<p>当然，理想情况下，你现在应该有一些测试（可能使用 nose）来运行你的代码和执行各种导入。CircleCI 应该配置为运行这些测试。<p>If you don’t have tests, you could just do a <strong>rosrun</strong> command at the end of this section of the <strong>circle.yaml</strong> file. If it works, fine. If not, CircleCI will show you an error.<p>如果您没有测试，您可以在 <strong>circle.yaml</strong> 文件这一部分的最后执行一个 <strong>rosrun</strong> 命令。如果成功了，那就没问题。如果不成功，CircleCI 会显示错误。<p>So with this, you can be confident that your dependencies will be installed correctly on other people’s machines. At least as confident as you can ever be in Linux Hell.<p>因此，您可以有信心，在其他人的机器上，您的依赖项将被正确安装。至少在 Linux 地狱中，您可以有如此信心。<p>To conclude, I should say that the above represents the best of my knowledge based on trudging through ROS Answers and StackOverflow. I’m very happy to be corrected by any ROS gurus out there.<p>总结来说，以上内容代表了我根据在 ROS Answers 和 StackOverflow 上摸索所积累的最佳知识。我很高兴被任何 ROS 大牛纠正。</div><hr><div class=md-source-file><small> 最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-03-28T07:57:52+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-03-28</span> <br> 创建日期: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-03-28T04:31:22+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-03-28</span> </small></div><h2 id=__comments>评论</h2><script async crossorigin data-category=Announcements data-category-id=DIC_kwDOKTCz0s4CZ2M5 data-emit-metadata=1 data-input-position=top data-lang=zh-CN data-loading=lazy data-mapping=pathname data-reactions-enabled=1 data-repo=RonaldLN/MyPamphlet-Blog data-repo-id=R_kgDOKTCz0g data-strict=0 data-theme=https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/giscus_sunset_glow.css src=https://giscus.app/client.js></script><script>var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "sunset-glow-dark"
        ? "https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/giscus_sunset_glow_dark.css"
        : "https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/giscus_sunset_glow.css"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "sunset-glow-dark"
            ? "https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/giscus_sunset_glow_dark.css"
            : "https://cdn.jsdelivr.net/gh/RonaldLN/MyPamphlet-Blog@main/docs/stylesheets/giscus_sunset_glow.css"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })</script></article></div></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部</button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=页脚><a aria-label="上一页: 实现麦克风录音并使用faster-whisper无文件读写地进行语音识别" class="md-footer__link md-footer__link--prev" href=../../26/faster-whisper/> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg></div> <div class=md-footer__title><span class=md-footer__direction> 上一页 </span><div class=md-ellipsis>实现麦克风录音并使用faster-whisper无文件读写地进行语音识别</div></div> </a><a aria-label="下一页: 关于使用MkDocs-Material文档仓库进行快速预览" class="md-footer__link md-footer__link--next" href=../../28/mkdocs-material/> <div class=md-footer__title><span class=md-footer__direction> 下一页 </span><div class=md-ellipsis>关于使用MkDocs-Material文档仓库进行快速预览</div></div> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg></div> </a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight>Copyright © 2023 - 2025 Ronald Luo</div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.expand", "toc.follow", "navigation.top", "search.suggest", "navigation.footer", "navigation.tabs", "navigation.tracking", "navigation.instant", "navigation.instant.progress", "content.code.copy", "search.suggest", "search.highlight", "search.share"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script><script src=../../../../assets/javascripts/bundle.aecac24b.min.js></script><script src=../../../../js/timeago.min.js></script><script src=../../../../js/timeago_mkdocs_material.js></script><script src=../../../../javascripts/katex.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js></script><script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script>