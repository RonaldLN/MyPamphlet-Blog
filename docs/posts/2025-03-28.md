---
draft: false
date: 2025-03-28
authors:
  - ronald_luo
categories:
  - Records of Trivia
comments: true
---

# å…³äºä½¿ç”¨MkDocs-Materialæ–‡æ¡£ä»“åº“è¿›è¡Œå¿«é€Ÿé¢„è§ˆ

ç”±äºæˆ‘çš„blogè¶Šå†™è¶Šå¤šï¼Œå¦‚æœæƒ³è¦åœ¨æ¨é€åˆ°githubå‰è¿›è¡Œæ•ˆæœé¢„è§ˆï¼Œåœ¨åŸæœ¬çš„æœ¬åœ°ä»“åº“ä¸­è¿›è¡Œ `mkdocs serve` æ—¶ï¼Œç¬¬ä¸€æ¬¡æ„å»ºä»¥åŠæ¯æ¬¡ä¿®æ”¹åçš„æ„å»ºéƒ½è¦ç­‰å¾…å¾ˆä¹…ï¼Œæ‰€ä»¥å°±æŠŠé™¤äº†mdæ–‡æ¡£å’Œgitçš„å…¶ä»–æ–‡ä»¶ç›´æ¥å¤åˆ¶åˆ°äº†å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå°†è¦é¢„è§ˆçš„mdæ–‡æ¡£æ”¾åœ¨è¿™ä¸ªâ€œå‰¯æœ¬ä»“åº“â€ä¸‹çš„ç›¸åº”çš„ä½ç½®ï¼Œå†è¿›è¡Œé¢„è§ˆç”Ÿæˆé€Ÿåº¦å°±å¾ˆå¿«äº†ã€‚

<!-- more -->

ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤åˆ¶äº†**é™¤äº†mdæ–‡æ¡£å’Œgitçš„å…¶ä»–æ–‡ä»¶**ä¹‹å**ç›´æ¥**è¿›è¡Œ `mkdocs serve` é¢„è§ˆå¯èƒ½ä¼šå› ä¸ºæ²¡æœ‰gitè€Œäº§ç”Ÿå¦‚ä¸‹çš„æŠ¥é”™

!!! failure

    ```bash
    INFO    -  Building documentation...
    WARNING -  [git-revision-date-localized-plugin] Unable to find a git directory and/or git is not installed. To ignore
               this error, set option 'fallback_to_build_date: true'
    Traceback (most recent call last):
      ...
      File "C:\Users\Ronald\AppData\Local\Programs\Python\Python310\lib\site-packages\git\repo\base.py", line 289, in __init__
        raise InvalidGitRepositoryError(epath)
    git.exc.InvalidGitRepositoryError: C:\Github\blog-test\docs
    ```

å¯ä»¥é€šè¿‡åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åˆå§‹åŒ–gitï¼Œå¹¶æŠŠæ‰€æœ‰æ–‡ä»¶commitæ¥(gitä¸­æ²¡æœ‰commitè®°å½•ä¼šæŠ¥é”™)è§£å†³è¿™ä¸ªæŠ¥é”™ã€‚

---

åˆå› ä¸ºæ¯æ¬¡åœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹‹é—´å¤åˆ¶mdæ–‡æ¡£ä»¥åŠå¼•ç”¨çš„å›¾ç‰‡è®©æˆ‘æ„Ÿåˆ°å¾ˆéº»çƒ¦ğŸ˜¡ï¼Œäºæ˜¯<del>ä¸€æ°”ä¹‹ä¸‹</del>å°±å†™äº†pythonæ¥å®ç°(äº›è®¸)è‡ªåŠ¨åŒ–çš„æµç¨‹

```python linenums="1"
import shutil
import sys
import re
import os

original_repo = os.path.normpath(os.path.join(os.getcwd(), '..', 'MyPamphlet-Blog'))

def extract_image_paths(markdown_content):
    # æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…Markdownä¸­çš„å›¾ç‰‡è¯­æ³•ï¼š![alt text](path/to/image)
    pattern = r'!\[(.*?)\]\((.*?)\)'
    images = re.findall(pattern, markdown_content)
    image_paths = [image[1] for image in images]
    return image_paths

def get_md_content(md_file_path):
    with open(md_file_path, 'r', encoding='utf-8') as file:
        content = file.read()
    return content

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python test.py <markdown_file_path>")
        sys.exit(1)

    target_md_file = sys.argv[1]
    content = get_md_content(os.path.join(original_repo, 'docs', 'posts', target_md_file))
    
    image_paths = extract_image_paths(content)
    print("æ£€æµ‹åˆ°çš„å›¾ç‰‡ç›¸å¯¹è·¯å¾„:")
    for path in image_paths:
        print(path)
    
    shutil.rmtree('docs/posts/')
    shutil.rmtree('docs/images/')
    os.makedirs('docs/posts/')
    os.makedirs('docs/images/')
    
    shutil.copy(os.path.join(original_repo, 'docs', 'posts', target_md_file), 'docs/posts')
    for path in image_paths:
        shutil.copy(os.path.join(original_repo, 'docs', 'images', path), 'docs/images')
    print("Markdownæ–‡ä»¶å’Œå›¾ç‰‡å·²ç§»åŠ¨åˆ°docsç›®å½•ä¸‹")
```

