---
draft: false
date: 2025-04-03
authors:
  - ronald_luo
categories:
  - Configure & Debug
comments: true
---

# åœ¨mkdocsä¸­çš„ä»£ç å—æ·»åŠ å±•å¼€/æŠ˜å åŠŸèƒ½

åœ¨æŸ¥çœ‹[pymdown-extensionsçš„æ–‡æ¡£](https://facelessuser.github.io/pymdown-extensions/)æ—¶ï¼Œå‘çŽ°åœ¨[`Details`](https://facelessuser.github.io/pymdown-extensions/extensions/details/)é¡µé¢çš„[åº•éƒ¨](https://facelessuser.github.io/pymdown-extensions/extensions/details/#browser-support)çš„ä¸¤ä¸ªä»£ç å—å¯ä»¥å±•å¼€å’ŒæŠ˜å (æŠ˜å æ—¶åªå±•ç¤ºå‡ è¡Œä»£ç )ï¼Œ

è€Œmkdoc-materialå®˜æ–¹å¯¹äºŽå°†ä»£ç å—æ”¶ç¼©è¿™æ ·çš„åŠŸèƒ½ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨[`Collapsible blocks`](https://squidfunk.github.io/mkdocs-material/reference/admonitions/#collapsible-blocks)

>   å‚è€ƒmkdocs-materialå®˜æ–¹çš„è®¨è®ºåŒºä¸­çš„ä¸€ä¸ªè®¨è®º
>
>   [Focussable & Collapsible code blocks. Â· squidfunk/mkdocs-material Â· Discussion #3944](https://github.com/squidfunk/mkdocs-material/discussions/3944)

<!-- more -->

ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå°†ä»£ç å—å…¨éƒ¨çš„ä»£ç éƒ½æŠ˜å èµ·æ¥ï¼Œè€Œæˆ‘æ›´æƒ³è¦[pymdown-extensionsæ–‡æ¡£](https://facelessuser.github.io/pymdown-extensions/)ä¸­é‚£æ ·çš„å¯ä»¥æ˜¾ç¤ºå¼€å¤´å‡ è¡Œä»£ç çš„åŠŸèƒ½ã€‚

äºŽæ˜¯åŽ»æŸ¥çœ‹å¯¹åº”çš„markdownæ–‡ä»¶ä¸­çš„æºç 

!!! quote "[details.md](https://github.com/facelessuser/pymdown-extensions/blob/f8d7f629bf4baa730e6c50dd62c95c45a7dc9eeb/docs/src/markdown/extensions/details.md?plain=1#L90-L129)"

    ````markdown
    //// collapse-code
    ```css
    ...
    ```
    ////
    ````

å‘çŽ°å¯èƒ½æ˜¯ä½¿ç”¨äº†`collapse-code`è¿™ä¸ªä¸œè¥¿ï¼ŒäºŽæ˜¯åŽ»æŸ¥çœ‹`mkdocs.yml`ä¸­ç›¸å…³çš„è®¾ç½®

!!! quote "[mkdocs.yml](https://github.com/facelessuser/pymdown-extensions/blob/f8d7f629bf4baa730e6c50dd62c95c45a7dc9eeb/mkdocs.yml#L232-L234)"

    ```yaml linenums="232"
      - tools.collapse_code:
          expand_text: ''
          collapse_text: ''
    ```

ç„¶åŽæ³¨æ„åˆ°ä»“åº“ä¸­æœ‰ä¸€ä¸ª`tools`æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åˆšå¥½æœ‰[`collapse_code.py`](https://github.com/facelessuser/pymdown-extensions/blob/f8d7f629bf4baa730e6c50dd62c95c45a7dc9eeb/tools/collapse_code.py)è¿™ä¸ªæ–‡ä»¶ï¼Œ

äºŽæ˜¯æˆ‘å°±æŠŠ`tools`è¿™ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°äº†æˆ‘çš„ä»“åº“ä¸­ï¼Œå¹¶åœ¨`mkdocs.yml`æ·»åŠ äº†ç›¸åŒçš„è®¾ç½®ï¼Œ

å°è¯•`mkdocs serve`ï¼Œä½†æŠ¥é”™

```ini
ERROR   -  Config value 'markdown_extensions': Failed to load extension 'tools.collapse_code'.
           ModuleNotFoundError: No module named 'tools'

Aborted with a configuration error!
```

ç„¶åŽåœ¨pymdown-extensionsä»“åº“ä¸­çš„issuesé‡Œæ‰¾åˆ°äº†è¿™ä¸ªissue

-   [cannot find module 'tools.pymdownx_md_render' during the serve document process Â· Issue #1446 Â· facelessuser/pymdown-extensions](https://github.com/facelessuser/pymdown-extensions/issues/1446)

[ä½œè€…çš„å›žç­”](https://github.com/facelessuser/pymdown-extensions/issues/1446#issuecomment-917857969)æåˆ°äº†æ­£ç¡®çš„æ–¹å¼æ˜¯è¿è¡Œ

```bash
python -m mkdocs serve
```

ç”¨è¿™ä¸ªå‘½ä»¤è¿è¡Œå°±ä¸ä¼šå‡ºçŽ°`ModuleNotFoundError`äº†ã€‚

ä½†æ˜¯æˆ‘å°è¯•åœ¨markdownæ–‡ä»¶ä¸­ä½¿ç”¨`//// collapse-code`ï¼Œè€Œé¢„è§ˆçš„é¡µé¢ä¸­ï¼Œä»£ç å—å¹¶æ²¡æœ‰å‡ºçŽ°å¯æŠ˜å çš„æ•ˆæžœï¼ŒäºŽæ˜¯æˆ‘æ€€ç–‘å¯èƒ½æ˜¯éœ€è¦æ·»åŠ csså±žæ€§çš„è®¾ç½®ï¼Œå°±æŠŠpymdown-extensionsä»“åº“ä¸­[å­˜æ”¾csså’Œjsçš„æ–‡ä»¶å¤¹](https://github.com/facelessuser/pymdown-extensions/tree/f8d7f629bf4baa730e6c50dd62c95c45a7dc9eeb/docs/theme/assets/pymdownx-extras)å¤åˆ¶åˆ°äº†æˆ‘çš„ä»“åº“ä¸­ï¼Œå¹¶ä»¿ç…§åœ¨`mkdocs.yml`ä¸­è¿›è¡Œæ·»åŠ ï¼Œé¢„è§ˆç•Œé¢ä¸­å°±å‡ºçŽ°äº†è¿™ä¸ªæ•ˆæžœã€‚

ç»è¿‡æŽ’æŸ¥ï¼Œå‘çŽ°æ˜¯cssä¸­æ ‡æœ‰`.collapse-code`çš„å±žæ€§ä»¥åŠè®¾ç½®æŒ‰é’®svgå±žæ€§æ˜¯ç›¸å…³çš„ã€‚æœ€åŽä¸ºäº†é€‚é…æˆ‘ä½¿ç”¨çš„ä¸»é¢˜ï¼Œè°ƒæ•´äº†ç›¸å…³çš„é¢œè‰²

???+ note "cssè®¾ç½®"

    ```css hl_lines="33 44 55"
    :root>* {
        --highlight-svg-arrow-expand: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 21v-2H6.41l4.5-4.5-1.41-1.41-4.5 4.5V14H3v7zm4.5-10.09 4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5z"/></svg>');
        --highlight-svg-arrow-collapse: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 3.09 15 7.59V4h-2v7h7V9h-3.59l4.5-4.5zM4 13v2h3.59l-4.5 4.5 1.41 1.41 4.5-4.5V20h2v-7z"/></svg>')
    }
    
    .md-typeset .collapse-code {
        position: relative;
        margin-top: 1em;
        margin-bottom: 1em
    }
    
    .md-typeset .collapse-code pre {
        margin-top: 0;
        margin-bottom: 0
    }
    
    .md-typeset .collapse-code input {
        display: none
    }
    
    .md-typeset .collapse-code input~.code-footer {
        width: 100%;
        margin: 0;
        padding: .25em .5em .25em 0em
    }
    
    .md-typeset .collapse-code input~.code-footer label {
        position: relative;
        margin: .05em;
        padding: .15em .8em;
        color: var(--md-primary-bg-color);
        font-size: 90%;
        background-color: var(--md-primary-bg-color);
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        -webkit-mask-size: contain;
        mask-size: contain;
        border-radius: .1rem;
        cursor: pointer;
        content: ""
    }
    
    .md-typeset .collapse-code input~.code-footer label:hover {
        background-color: var(--md-default-fg-color--light)
    }
    
    .md-typeset .collapse-code input~.code-footer label::before {
        position: absolute;
        top: .15em;
        left: .15em;
        display: block;
        box-sizing: border-box;
        width: 1.25em;
        height: 1.25em;
        background-color: var(--md-primary-fg-color);
        background-size: 1.25em;
        content: ""
    }
    
    .md-typeset .collapse-code input~.code-footer label.expand {
        display: none
    }
    
    .md-typeset .collapse-code input~.code-footer label.expand::before {
        -webkit-mask-image: var(--highlight-svg-arrow-expand);
        mask-image: var(--highlight-svg-arrow-expand)
    }
    
    .md-typeset .collapse-code input~.code-footer label.collapse::before {
        -webkit-mask-image: var(--highlight-svg-arrow-collapse);
        mask-image: var(--highlight-svg-arrow-collapse)
    }
    
    .md-typeset .collapse-code input:checked~.code-footer label.expand {
        display: inline
    }
    
    .md-typeset .collapse-code input:checked~.code-footer label.collapse {
        display: none
    }
    
    .md-typeset .collapse-code input:checked+div.highlight code {
        max-height: 9.375em;
        overflow: hidden
    }
    
    .md-typeset .collapse-code input:checked~.code-footer {
        position: absolute;
        bottom: 0;
        left: 0;
        padding: 2em .5em .5em .8rem;
        background-image: linear-gradient(to bottom, transparent, var(--md-default-bg-color) 80% 100%)
    }
    
    .md-typeset .tabbed-alternate.tabbed-set>.tabbed-content>.tabbed-block>.collapse-code:only-child {
        margin-top: 0;
        margin-right: -1.2rem;
        margin-left: -1.2rem;
        padding-right: .6rem;
        padding-left: .6rem
    }
    
    .md-typeset .tabbed-alternate.tabbed-set>.tabbed-content>.tabbed-block>.collapse-code:only-child>.code-footer {
        left: .6rem
    }
    
    @media screen and (max-width: 44.9375em) {
        .md-typeset>.collapse-code {
            margin-right: -0.8rem;
            margin-left: -0.8rem
        }
    
        .md-typeset>.collapse-code label.collapse {
            left: .8rem
        }
    }
    ```

>   æœŸé—´è¿˜åœ¨pymdown-extensions discussionsé‡Œå‘äº†ä¸€ä¸ªæé—®ï¼Œä½†æ˜¯å‘å®Œä¹‹åŽè‡ªå·±å°±ä¸€æ­¥æ­¥è§£å†³äº†ðŸ˜‚
>
>   [How to use collapse-code in `tools` of this repo? Â· facelessuser/pymdown-extensions Â· Discussion #2638](https://github.com/facelessuser/pymdown-extensions/discussions/2638)
