---
draft: false
date: 2025-05-05
authors:
  - ronald_luo
categories:
  - Configure & Debug
comments: true
---

# åœ¨VSCodeä¸­è¿æ¥Dockerç¯å¢ƒå¹¶è°ƒè¯•åŸºäºMakefileçš„é¡¹ç›®

[ä¸Šä¸€ç¯‡](2025-05-04.md)çš„å»¶ç»­ğŸ˜…ï¼Œ<del>å› ä¸ºç”¨clionè°ƒè¯•å¥½åƒå‡ºäº†ä¸€ç‚¹å¥‡æ€ªçš„å°é—®é¢˜æš‚æ—¶æ²¡æœ‰ææ¸…æ¥šğŸ˜…å¹¶ä¸”ä¹Ÿæ‡’å¾—äº†ï¼Œäºæ˜¯å°±</del>æŒ‰ç…§ä¹‹å‰ä»è°·æ­Œæœå‡ºæ¥çš„stackoverflowçš„å¸–å­ä¸­çš„å›ç­”è¿›è¡Œ(vscodeçš„)è®¾ç½®ï¼Œå¹¶ä¸”è¿˜éœ€è¦dockerå®¹å™¨ä¸­æœ‰gdbï¼Œå°±å¯ä»¥æ–­ç‚¹è°ƒè¯•äº†ã€‚

-   [How to "fix" debugger in VScode if you have Makefile project on C++? - Stack Overflow](https://stackoverflow.com/questions/58581500/how-to-fix-debugger-in-vscode-if-you-have-makefile-project-on-c/)

<!-- more -->

>   å…¶å®æ˜¯å…ˆ[Googleæœç´¢äº†`how to debug in a make project`](https://www.google.com/search?q=how+to+debug+in+a+make+project)ï¼Œå¾—åˆ°è¿™ä¸ªå¸–å­
>
>   [Debugging an existing project with Makefile in Visual Studio Code - Stack Overflow](https://stackoverflow.com/questions/67046479/debugging-an-existing-project-with-makefile-in-visual-studio-code)
>
>   å”¯ä¸€çš„å›ç­”ä¸­å°±ç›´æ¥å›å¤äº†ä¸Šé¢çš„é‚£ä¸ªå¸–å­

å‚è€ƒ[æœ€é«˜èµå›ç­”](https://stackoverflow.com/a/58779252)ï¼Œä¸»è¦æ˜¯éœ€è¦åœ¨é¡¹ç›®çš„`.vscode`æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºå¹¶è®¾ç½®`tasks.json`å’Œ`launch.json`

>   ä¹‹å‰å› ä¸ºå®¹å™¨ä¸­æ²¡æœ‰gdbæ‰€ä»¥ä¸€ç›´æ²¡æœ‰æˆåŠŸï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å› ä¸ºæ²¡è£…gdbçš„åŸå› ğŸ˜…

ä»¥ä¸‹æ˜¯æœ€åæˆ‘åœ¨ç¼–è¯‘å™¨é¡¹ç›®ä¸­ä½¿ç”¨çš„`tasks.json`å’Œ`launch.json`

```json title="launch.json" hl_lines="11 12 25"
{
  // Use IntelliSense to learn about possible attributes.
  // Hover to view descriptions of existing attributes.
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Pusk", //I named it Pusk because i can 
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/build/compiler", //path to your programs exe and exe name
      "args": ["-riscv", "hello.c", "-o", "hello.s"],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "MIMode": "gdb",
      "setupCommands": [
        {
          "description": "Enable pretty-printing for gdb",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        }
      ],
      "preLaunchTask": "Build"
    }
  ]
}
```

```json title="tasks.json"
{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build",
      "type": "shell",
      "command": "make", //its like writing in console make //btw you can others commands like clean make build etc
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": {
        "owner": "cpp",
        "fileLocation": ["relative", "${workspaceFolder}"],
        "pattern": {
          "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    }
  ]
}
```

éœ€è¦è¯´æ˜ä¸€ä¸‹çš„æ˜¯ï¼Œåœ¨`launch.json`ä¸­

-   `"program"`éœ€è¦ä¿®æ”¹ä¸ºç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œç¨‹åºçš„ä½ç½®
-   `"args"`å†…æ·»åŠ è¿è¡Œç¨‹åºéœ€è¦çš„å‘½ä»¤è¡Œå‚æ•°
-   `"preLaunchTask"`åŸæœ¬åœ¨å¸–å­ä¸­æ²¡æœ‰æåˆ°ï¼Œæ·»åŠ å‰åœ¨vscodeä¸­ç‚¹å‡»è°ƒè¯•åå¹¶ä¸èƒ½è‡ªåŠ¨è¿›è¡Œmakeï¼Œä¸Šç½‘æœç´¢å‘ç°éœ€è¦æ·»åŠ è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤å¤„è®¾ç½®çš„å€¼åº”ä¸`tasks.json`ä¸­çš„`"label"`ä¸€è‡´ï¼Œç„¶åç‚¹å‡»è°ƒè¯•ä¹‹åå°±å¯ä»¥è‡ªåŠ¨è¿›è¡Œmakeäº†

![vscode_docker_debug](../images/vscode_docker_debug.png){ loading=lazy }
